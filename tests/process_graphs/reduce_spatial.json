{
   "loadcollection1":{
      "process_id":"load_collection",
      "arguments":{
         "bands":[
            "B01",
            "B02",
            "B03",
            "B08",
            "B12"
         ],
         "id":"S2L1C"
      }
   },
   "filterbands1":{
      "process_id":"filter_bands",
      "arguments":{
         "bands":[
            "B03",
            "B08"
         ],
         "data":{
            "from_node":"loadcollection1"
         }
      }
   },
   "reducedimension1":{
      "process_id":"reduce_dimension",
      "arguments":{
         "data":{
            "from_node":"filterbands1"
         },
         "dimension":"x",
         "reducer":{
            "process_graph":{
               "mean1":{
                  "process_id":"mean",
                  "arguments":{
                     "data":{
                        "from_parameter":"data"
                     }
                  },
                  "result":true
               }
            }
         }
      },
      "description":"Reducing by a spatial dimension, which isn't possible on Sentinel Hub."
   },
   "reducedimension2":{
      "process_id":"reduce_dimension",
      "arguments":{
         "data":{
            "from_node":"loadcollection1"
         },
         "dimension":"bands",
         "reducer":{
            "process_graph":{
               "arrayelement1":{
                  "process_id":"array_element",
                  "arguments":{
                     "data":{
                        "from_parameter":"data"
                     },
                     "label":"B01"
                  }
               },
               "arrayelement2":{
                  "process_id":"array_element",
                  "arguments":{
                     "data":{
                        "from_parameter":"data"
                     },
                     "label":"B12"
                  }
               },
               "subtract1":{
                  "process_id":"subtract",
                  "arguments":{
                     "x":{
                        "from_node":"arrayelement1"
                     },
                     "y":{
                        "from_node":"arrayelement2"
                     }
                  },
                  "result":true
               }
            }
         }
      },
      "description":"Valid reduce"
   },
   "mergecubes":{
      "process_id":"merge_cubes",
      "arguments":{
         "cube1":{
            "from_node":"reducedimension1"
         },
         "cube2":{
            "from_node":"reducedimension2"
         }
      },
      "description":"Merging a valid cube with one that can't be calculated"
   },
   "nonexistentprocess":{
      "process_id":"non_existent",
      "arguments":{
         "data":{
            "from_node":"reducedimension2"
         }
      },
      "description":"Handle nodes with processes which aren't supported"
   },
   "mergecubes2":{
      "process_id":"merge_cubes",
      "arguments":{
         "cube1":{
            "from_node":"mergecubes"
         },
         "cube2":{
            "from_node":"nonexistentprocess"
         }
      },
      "description":"Merging a valid cube with one that can't be calculated"
   },
   "saveresult1":{
      "process_id":"save_result",
      "arguments":{
         "data":{
            "from_node":"mergecubes"
         },
         "format":"GTIFF-THUMB",
         "options":{
            "red":"R",
            "green":"G",
            "blue":"B"
         }
      },
      "description":"Save the resulting datacube as GeoTiff",
      "result":true
   }
}